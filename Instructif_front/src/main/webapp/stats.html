<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <title>stats</title>
</head>

<body>
    
    <p>Nombre d'élèves inscrits :</p>
    <p id="nbEleve">Calcul en cours...</p>
    <br>
    <p>Nombre de cours aujourd'hui :</p>
    <p id="nbCours">Calcul en cours...</p>
    <br>
    <p>Nombre total de demandes de soutien :</p>
    <p id="nbDemandes">Calcul en cours...</p>
    <br>
    <p>Nombre d'élèves avec IPS < 81 :</p>
    <p id="nbIPS">Calcul en cours...</p>
    <br>
    <p>Etablissements des élèves :</p>
    <p id="etabEleves">Calcul en cours...</p>
    <br>
    
    <script>
            $(document).ready(function() {
                
                $.ajax({
                    type: 'POST',
                    url: 'action-servlet?todo=stats', // Replace with the correct URL to your Java EE servlet
                    data: {
                        todo: 'stats'
                    },
                    dataType: 'json'
                })
                .done(function(response) {
                    console.log('Response', response);
                    
                    $('#nbEleve').html(response.nbEleve);
                    $('#nbCours').html(response.nbCours);
                    $('#nbDemandes').html(response.nbDemandes);
                    $('#nbIPS').html(response.nbIPS);
                    $('#etabEleves').html(response.etabEleves);
                    
                })
                .fail(function(error) {
                    console.log('Error', error);
                    alert("Erreur lors de l'appel AJAX");
                })
                .always(function () {
                            
                });
            });
    </script>
</body>

</html>